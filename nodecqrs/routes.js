// Generated by IcedCoffeeScript 1.6.3-g
(function() {


  define(['module', 'express', 'path', 'nodecqrs/storage'], function(module, express, path, store) {
    return {
      configure: function(app) {
        return app.use('/', express["static"](path.join(path.dirname(module.uri), '/public')));
      },
      init: function(app) {
        app.get('/', function(req, res) {
          return res.render({
            view: 'nodecqrs/layout',
            data: {
              title: 'nodecqrs example'
            },
            partials: {
              content: 'index'
            }
          });
        });
        return app.get('/allItems.json', function(req, res) {
          return store.loadAll(function(err, items) {
            if (err) {
              res.json({});
            }
            return res.json(items);
          });
        });
      }
    };
  });

}).call(this);
