// Generated by CoffeeScript 1.6.3
(function() {
  define(['redis', 'odo/config'], function(redis, config) {
    var UserTwitter, db;
    db = redis.createClient();
    return UserTwitter = (function() {
      function UserTwitter() {
        var _this = this;
        this.receive = {
          userTwitterAttached: function(event) {
            console.log('UserTwitter userTwitterAttached');
            return db.hset("" + config.odo.domain + ":usertwitter", event.payload.profile.id, event.payload.id);
          }
        };
      }

      UserTwitter.prototype.get = function(id, callback) {
        var _this = this;
        return db.hget("" + config.odo.domain + ":usertwitter", id, function(err, data) {
          if (err != null) {
            callback(err);
            return;
          }
          if (data != null) {
            callback(null, data);
            return;
          }
          return db.hget("" + config.odo.domain + ":usertwitter", id, function(err, data) {
            if (err != null) {
              callback(err);
              return;
            }
            return callback(null, data);
          });
        });
      };

      return UserTwitter;

    })();
  });

}).call(this);
